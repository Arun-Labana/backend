
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A 45-day learning plan covering essential backend concepts with beginner-friendly notes and Java examples.">
      
      
      
        <link rel="canonical" href="https://Arun-Labana.github.io/backend/14.%20CAP%20Theorem/">
      
      
        <link rel="prev" href="../13.%20Replication/">
      
      
        <link rel="next" href="../15.%20REST%20APIs/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>14. CAP Theorem - 45 Days Backend Concepts</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cap-theorem" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="45 Days Backend Concepts" class="md-header__button md-logo" aria-label="45 Days Backend Concepts" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            45 Days Backend Concepts
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              14. CAP Theorem
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Arun-Labana/backend" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Arun-Labana/backend
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="45 Days Backend Concepts" class="md-nav__button md-logo" aria-label="45 Days Backend Concepts" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    45 Days Backend Concepts
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Arun-Labana/backend" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Arun-Labana/backend
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Days
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Days
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01.%20Connection%20Pooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    01. Connection Pooling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02.%20Idempotency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    02. Idempotency
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03.%20Caching%20%28In-Memory%20vs%20Distributed%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    03. Caching (In-Memory vs Distributed)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04.%20Load%20Balancing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    04. Load Balancing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05.%20Rate%20Limiting%20%26%20Throttling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    05. Rate Limiting & Throttling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06.%20Horizontal%20vs%20Vertical%20Scaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    06. Horizontal vs Vertical Scaling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07.%20Stateless%20vs%20Stateful%20Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    07. Stateless vs Stateful Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08.%20Transactions%20%28ACID%20properties%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    08. Transactions (ACID properties)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09.%20Indexes%20%28B-Tree%2C%20Hash%2C%20etc.%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    09. Indexes (B-Tree, Hash, etc.)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10.%20Joins%20%26%20Query%20Optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10. Joins & Query Optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11.%20Normalization%20vs%20Denormalization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11. Normalization vs Denormalization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12.%20Sharding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12. Sharding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13.%20Replication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13. Replication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    14. CAP Theorem
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    14. CAP Theorem
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-the-cap-theorem" class="md-nav__link">
    <span class="md-ellipsis">
      What is the CAP Theorem?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#understanding-the-three-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the Three Properties
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding the Three Properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consistency-c" class="md-nav__link">
    <span class="md-ellipsis">
      Consistency (C)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#availability-a" class="md-nav__link">
    <span class="md-ellipsis">
      Availability (A)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#partition-tolerance-p" class="md-nav__link">
    <span class="md-ellipsis">
      Partition Tolerance (P)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-trade-offs-choosing-two-of-three" class="md-nav__link">
    <span class="md-ellipsis">
      The Trade-offs: Choosing Two of Three
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Trade-offs: Choosing Two of Three">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cp-systems-consistency-partition-tolerance-sacrificing-availability" class="md-nav__link">
    <span class="md-ellipsis">
      CP Systems: Consistency + Partition Tolerance (Sacrificing Availability)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ap-systems-availability-partition-tolerance-sacrificing-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      AP Systems: Availability + Partition Tolerance (Sacrificing Consistency)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ca-systems-consistency-availability-sacrificing-partition-tolerance" class="md-nav__link">
    <span class="md-ellipsis">
      CA Systems: Consistency + Availability (Sacrificing Partition Tolerance)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Real-World Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real-World Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#e-commerce-inventory-management" class="md-nav__link">
    <span class="md-ellipsis">
      E-commerce Inventory Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#global-chat-application" class="md-nav__link">
    <span class="md-ellipsis">
      Global Chat Application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#financial-trading-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Financial Trading Systems
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-cap-implementation-example" class="md-nav__link">
    <span class="md-ellipsis">
      Simple CAP Implementation Example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-interview-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Common Interview Questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#beyond-cap-modern-perspectives" class="md-nav__link">
    <span class="md-ellipsis">
      Beyond CAP: Modern Perspectives
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Beyond CAP: Modern Perspectives">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pacelc-theorem" class="md-nav__link">
    <span class="md-ellipsis">
      PACELC Theorem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventual-consistency-models" class="md-nav__link">
    <span class="md-ellipsis">
      Eventual Consistency Models
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices-for-cap-aware-design" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices for CAP-Aware Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices for CAP-Aware Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understand-your-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Understand Your Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-for-graceful-degradation" class="md-nav__link">
    <span class="md-ellipsis">
      Design for Graceful Degradation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor-and-alert" class="md-nav__link">
    <span class="md-ellipsis">
      Monitor and Alert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-partition-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      Test Partition Scenarios
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../15.%20REST%20APIs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15. REST APIs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../16.%20GraphQL%20Basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    16. GraphQL Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../17.%20gRPC%20%26%20Protocol%20Buffers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    17. gRPC & Protocol Buffers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../18.%20WebSockets%20%28Realtime%20communication%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    18. WebSockets (Realtime communication)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../19.%20Message%20Queues%20%28RabbitMQ%2C%20Kafka%2C%20SQS%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    19. Message Queues (RabbitMQ, Kafka, SQS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../20.%20Event-driven%20Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    20. Event-driven Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../21.%20API%20Gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    21. API Gateway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../22.%20Circuit%20Breaker%20Pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    22. Circuit Breaker Pattern
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../23.%20Retry%20%26%20Backoff%20Strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    23. Retry & Backoff Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../24.%20Dead%20Letter%20Queues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    24. Dead Letter Queues
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../25.%20Distributed%20Locks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    25. Distributed Locks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../26.%20Leader%20Election/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    26. Leader Election
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../27.%20Consensus%20Algorithms%20%28Raft%2C%20Paxos%20basics%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    27. Consensus Algorithms (Raft, Paxos basics)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../28.%20Quorum%20in%20Databases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    28. Quorum in Databases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../29.%20Authentication%20vs%20Authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    29. Authentication vs Authorization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../30.%20JWT%20%26%20OAuth2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    30. JWT & OAuth2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../31.%20CSRF%20%26%20XSS%20Protection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    31. CSRF & XSS Protection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../32.%20SQL%20Injection%20%26%20Prevention/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    32. SQL Injection & Prevention
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../33.%20HTTPS%20%26%20TLS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    33. HTTPS & TLS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../34.%20CORS%20%28Cross-Origin%20Resource%20Sharing%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    34. CORS (Cross-Origin Resource Sharing)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../35.%20Hashing%20%26%20Password%20Storage%20%28bcrypt%2C%20Argon2%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    35. Hashing & Password Storage (bcrypt, Argon2)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../36.%20Logging%20Strategies%20%28Structured%20Logging%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    36. Logging Strategies (Structured Logging)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../37.%20Metrics%20%26%20Monitoring%20%28Prometheus%2C%20Grafana%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    37. Metrics & Monitoring (Prometheus, Grafana)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../38.%20Tracing%20%28Distributed%20Tracing%2C%20OpenTelemetry%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    38. Tracing (Distributed Tracing, OpenTelemetry)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../39.%20Health%20Checks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    39. Health Checks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../40.%20Profiling%20%26%20Benchmarking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    40. Profiling & Benchmarking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../41.%20Error%20Handling%20Patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    41. Error Handling Patterns
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../42.%20Blue-Green%20%26%20Canary%20Deployments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    42. Blue-Green & Canary Deployments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../43.%20CQRS%20%28Command%20Query%20Responsibility%20Segregation%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    43. CQRS (Command Query Responsibility Segregation)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../44.%20Event%20Sourcing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    44. Event Sourcing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../45.%20Microservices%20vs%20Monoliths%20vs%20Serverless/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    45. Microservices vs Monoliths vs Serverless
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-the-cap-theorem" class="md-nav__link">
    <span class="md-ellipsis">
      What is the CAP Theorem?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#understanding-the-three-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the Three Properties
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding the Three Properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consistency-c" class="md-nav__link">
    <span class="md-ellipsis">
      Consistency (C)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#availability-a" class="md-nav__link">
    <span class="md-ellipsis">
      Availability (A)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#partition-tolerance-p" class="md-nav__link">
    <span class="md-ellipsis">
      Partition Tolerance (P)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-trade-offs-choosing-two-of-three" class="md-nav__link">
    <span class="md-ellipsis">
      The Trade-offs: Choosing Two of Three
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Trade-offs: Choosing Two of Three">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cp-systems-consistency-partition-tolerance-sacrificing-availability" class="md-nav__link">
    <span class="md-ellipsis">
      CP Systems: Consistency + Partition Tolerance (Sacrificing Availability)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ap-systems-availability-partition-tolerance-sacrificing-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      AP Systems: Availability + Partition Tolerance (Sacrificing Consistency)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ca-systems-consistency-availability-sacrificing-partition-tolerance" class="md-nav__link">
    <span class="md-ellipsis">
      CA Systems: Consistency + Availability (Sacrificing Partition Tolerance)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Real-World Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real-World Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#e-commerce-inventory-management" class="md-nav__link">
    <span class="md-ellipsis">
      E-commerce Inventory Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#global-chat-application" class="md-nav__link">
    <span class="md-ellipsis">
      Global Chat Application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#financial-trading-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Financial Trading Systems
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-cap-implementation-example" class="md-nav__link">
    <span class="md-ellipsis">
      Simple CAP Implementation Example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-interview-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Common Interview Questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#beyond-cap-modern-perspectives" class="md-nav__link">
    <span class="md-ellipsis">
      Beyond CAP: Modern Perspectives
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Beyond CAP: Modern Perspectives">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pacelc-theorem" class="md-nav__link">
    <span class="md-ellipsis">
      PACELC Theorem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventual-consistency-models" class="md-nav__link">
    <span class="md-ellipsis">
      Eventual Consistency Models
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices-for-cap-aware-design" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices for CAP-Aware Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices for CAP-Aware Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understand-your-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Understand Your Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-for-graceful-degradation" class="md-nav__link">
    <span class="md-ellipsis">
      Design for Graceful Degradation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor-and-alert" class="md-nav__link">
    <span class="md-ellipsis">
      Monitor and Alert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-partition-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      Test Partition Scenarios
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/Arun-Labana/backend/edit/master/docs/14. CAP Theorem/README.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="cap-theorem">CAP Theorem<a class="headerlink" href="#cap-theorem" title="Permanent link">&para;</a></h1>
<h2 id="what-is-the-cap-theorem">What is the CAP Theorem?<a class="headerlink" href="#what-is-the-cap-theorem" title="Permanent link">&para;</a></h2>
<p>The CAP Theorem, also known as Brewer's Theorem, is a fundamental principle in distributed systems that states you cannot simultaneously guarantee all three of the following properties: Consistency, Availability, and Partition tolerance. Think of it like trying to optimize a triangle where you can only maximize two sides at the expense of the third. In distributed systems, you must choose which two properties are most important for your specific use case and accept trade-offs on the third.</p>
<p>This theorem was formally proven by Seth Gilbert and Nancy Lynch in 2002, building on Eric Brewer's earlier conjecture. It has become one of the most important concepts for understanding the inherent limitations and design choices in distributed database systems and helps explain why different database systems make different architectural decisions.</p>
<h2 id="understanding-the-three-properties">Understanding the Three Properties<a class="headerlink" href="#understanding-the-three-properties" title="Permanent link">&para;</a></h2>
<h3 id="consistency-c">Consistency (C)<a class="headerlink" href="#consistency-c" title="Permanent link">&para;</a></h3>
<p>Consistency means that all nodes in a distributed system see the same data at the same time. When you write data to the system, every subsequent read operation should return that same data, regardless of which node handles the request. It's like having multiple copies of a document that are always perfectly synchronized - when you update one copy, all other copies immediately reflect the same change.</p>
<p>In practical terms, consistency ensures that your distributed system behaves as if it were a single, centralized system from the perspective of data correctness. If user A updates their profile picture on one server, user B should immediately see that updated picture when they view the profile, regardless of which server they're connected to.</p>
<p>Strong consistency can be expensive to maintain in distributed systems because it often requires coordination between multiple nodes before confirming write operations, which can impact performance and availability.</p>
<h3 id="availability-a">Availability (A)<a class="headerlink" href="#availability-a" title="Permanent link">&para;</a></h3>
<p>Availability means that the system remains operational and responsive to requests, even when some nodes fail or become unreachable. An available system guarantees that every request receives a response, though that response might not reflect the most recent write operations if there are consistency trade-offs.</p>
<p>Think of availability like a store that promises to always be open for business. Even if some employees are sick or the building has power issues in one section, the store finds ways to keep serving customers, perhaps with reduced service levels or temporary workarounds.</p>
<p>In distributed systems, high availability typically means that the system continues to function even when individual servers crash, network connections fail, or entire data centers become unreachable. This often requires redundancy and the ability to route requests to healthy nodes when others are unavailable.</p>
<h3 id="partition-tolerance-p">Partition Tolerance (P)<a class="headerlink" href="#partition-tolerance-p" title="Permanent link">&para;</a></h3>
<p>Partition tolerance means that the system continues to operate even when network failures split the system into multiple isolated groups (partitions) that cannot communicate with each other. Network partitions are a reality in distributed systems - cables get cut, routers fail, data centers lose connectivity, and wireless networks experience interference.</p>
<p>Imagine a company with offices in New York and London that need to share data. If the transatlantic cable connecting them fails, partition tolerance means both offices can continue working independently, even though they can't communicate with each other. Without partition tolerance, the entire system would become unusable when such network splits occur.</p>
<p>Since network failures are inevitable in distributed systems, partition tolerance is generally considered non-negotiable for any truly distributed architecture. This means the real choice is usually between consistency and availability when partitions occur.</p>
<h2 id="the-trade-offs-choosing-two-of-three">The Trade-offs: Choosing Two of Three<a class="headerlink" href="#the-trade-offs-choosing-two-of-three" title="Permanent link">&para;</a></h2>
<h3 id="cp-systems-consistency-partition-tolerance-sacrificing-availability">CP Systems: Consistency + Partition Tolerance (Sacrificing Availability)<a class="headerlink" href="#cp-systems-consistency-partition-tolerance-sacrificing-availability" title="Permanent link">&para;</a></h3>
<p>CP systems prioritize data consistency and can handle network partitions, but may become unavailable when consistency cannot be guaranteed. When a network partition occurs, these systems may refuse to serve requests rather than risk serving inconsistent data.</p>
<p>Traditional relational databases like PostgreSQL or MySQL, when configured with strong consistency requirements, often fall into this category. If these systems cannot reach a quorum of nodes to confirm that data is consistent across replicas, they may choose to become unavailable rather than serve potentially stale data.</p>
<p>Banking systems often choose CP characteristics because serving incorrect account balances or allowing inconsistent transaction records could have serious financial consequences. It's better for the system to be temporarily unavailable than to show incorrect account balances to customers.</p>
<h3 id="ap-systems-availability-partition-tolerance-sacrificing-consistency">AP Systems: Availability + Partition Tolerance (Sacrificing Consistency)<a class="headerlink" href="#ap-systems-availability-partition-tolerance-sacrificing-consistency" title="Permanent link">&para;</a></h3>
<p>AP systems prioritize staying available and handling network partitions, but may serve inconsistent data during partition scenarios. These systems choose to keep serving requests even if they cannot guarantee that all nodes have the same data.</p>
<p>Content delivery networks (CDNs) and many NoSQL databases like Amazon DynamoDB or Cassandra can operate in AP mode. They prioritize keeping the service available for users, accepting that some users might temporarily see different versions of content or data until the system can reconcile differences.</p>
<p>Social media platforms often choose AP characteristics because it's more important for users to be able to post updates and browse content than to guarantee that every user sees exactly the same content at exactly the same time. Users can tolerate seeing slightly outdated information if it means the platform remains responsive.</p>
<h3 id="ca-systems-consistency-availability-sacrificing-partition-tolerance">CA Systems: Consistency + Availability (Sacrificing Partition Tolerance)<a class="headerlink" href="#ca-systems-consistency-availability-sacrificing-partition-tolerance" title="Permanent link">&para;</a></h3>
<p>CA systems can provide both consistency and availability, but only when all nodes can communicate with each other. These systems cannot handle network partitions gracefully and may become completely unavailable when the network splits.</p>
<p>Traditional single-node databases or systems that require all nodes to be in the same network segment with reliable connectivity might exhibit CA characteristics. However, true CA systems are rare in distributed environments because network partitions are inevitable at scale.</p>
<p>Some clustered database systems within a single data center might operate in CA mode, assuming that network reliability within the data center is high enough that partitions are extremely rare.</p>
<h2 id="real-world-examples">Real-World Examples<a class="headerlink" href="#real-world-examples" title="Permanent link">&para;</a></h2>
<h3 id="e-commerce-inventory-management">E-commerce Inventory Management<a class="headerlink" href="#e-commerce-inventory-management" title="Permanent link">&para;</a></h3>
<p>An e-commerce platform faces classic CAP theorem trade-offs with inventory management. They could choose:</p>
<p><strong>CP Approach</strong>: Ensure that inventory counts are always accurate across all systems, but risk the shopping site becoming unavailable during network issues. This prevents overselling but might lose sales during outages.</p>
<p><strong>AP Approach</strong>: Keep the shopping site available even during network partitions, but risk overselling products if inventory data becomes inconsistent between regions. They might oversell items but keep customers happy with site availability.</p>
<p>Many platforms choose a hybrid approach: use CP systems for critical inventory decisions (preventing overselling of limited items) while using AP systems for less critical features like product recommendations or reviews.</p>
<h3 id="global-chat-application">Global Chat Application<a class="headerlink" href="#global-chat-application" title="Permanent link">&para;</a></h3>
<p>A messaging application serving users worldwide must decide how to handle network partitions between regions:</p>
<p><strong>CP Approach</strong>: Ensure all users see messages in exactly the same order, but make the chat unavailable when network connections between regions fail. Users get perfect consistency but might lose access to chat during network issues.</p>
<p><strong>AP Approach</strong>: Allow users to continue chatting even when regions are disconnected, accepting that message ordering might be inconsistent until connectivity is restored. Users can always chat, but might temporarily see messages in different orders.</p>
<p>Most modern chat applications choose AP characteristics, prioritizing user ability to communicate over perfect message consistency.</p>
<h3 id="financial-trading-systems">Financial Trading Systems<a class="headerlink" href="#financial-trading-systems" title="Permanent link">&para;</a></h3>
<p>High-frequency trading systems face critical CAP theorem decisions:</p>
<p><strong>CP Approach</strong>: Ensure that all trading nodes have perfectly consistent market data before executing trades, but halt trading during network partitions. This prevents trading on stale data but might miss market opportunities.</p>
<p><strong>AP Approach</strong>: Continue trading even during network partitions, accepting that different nodes might have slightly different market views. This maximizes trading opportunities but risks trading on inconsistent data.</p>
<p>Most financial systems lean heavily toward CP characteristics because the cost of trading on inconsistent data far exceeds the cost of temporary unavailability.</p>
<h2 id="simple-cap-implementation-example">Simple CAP Implementation Example<a class="headerlink" href="#simple-cap-implementation-example" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># Simplified example showing CAP trade-offs in a distributed cache</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DistributedCache</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">consistency_mode</span><span class="o">=</span><span class="s2">&quot;eventual&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;node1&quot;</span><span class="p">,</span> <span class="s2">&quot;node2&quot;</span><span class="p">,</span> <span class="s2">&quot;node3&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">node</span><span class="p">:</span> <span class="p">{}</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">consistency_mode</span> <span class="o">=</span> <span class="n">consistency_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">partition_status</span> <span class="o">=</span> <span class="p">{</span><span class="n">node</span><span class="p">:</span> <span class="kc">True</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">}</span>  <span class="c1"># True = connected</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">simulate_partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Simulate network partition by disconnecting a node&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">partition_status</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2"> is now partitioned&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">write_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write data with different consistency guarantees&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consistency_mode</span> <span class="o">==</span> <span class="s2">&quot;strong&quot;</span><span class="p">:</span>
            <span class="c1"># CP: Only write if we can reach majority of nodes</span>
            <span class="n">available_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">partition_status</span><span class="p">[</span><span class="n">n</span><span class="p">]]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">available_nodes</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Cannot maintain consistency - insufficient nodes available&quot;</span><span class="p">)</span>

            <span class="c1"># Write to all available nodes</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">available_nodes</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Written to </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">available_nodes</span><span class="p">)</span><span class="si">}</span><span class="s2"> nodes with strong consistency&quot;</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># eventual consistency </span>
            <span class="c1"># AP: Write to any available node</span>
            <span class="n">available_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">partition_status</span><span class="p">[</span><span class="n">n</span><span class="p">]]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">available_nodes</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No nodes available&quot;</span><span class="p">)</span>

            <span class="c1"># Write to first available node</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">available_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Written to </span><span class="si">{</span><span class="n">available_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> with eventual consistency&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">read_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read data based on consistency mode&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consistency_mode</span> <span class="o">==</span> <span class="s2">&quot;strong&quot;</span><span class="p">:</span>
            <span class="c1"># Must read from majority of nodes to ensure consistency</span>
            <span class="n">available_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">partition_status</span><span class="p">[</span><span class="n">n</span><span class="p">]]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">available_nodes</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Cannot guarantee consistency - insufficient nodes&quot;</span><span class="p">)</span>

            <span class="c1"># Return data if consistent across majority</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">node</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">available_nodes</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Inconsistent data detected&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># eventual consistency</span>
            <span class="c1"># Read from any available node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">partition_status</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">node</span><span class="p">]:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="n">key</span><span class="p">]</span>
            <span class="k">return</span> <span class="kc">None</span>

<span class="c1"># Example usage</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== CP System (Strong Consistency) ===&quot;</span><span class="p">)</span>
<span class="n">cp_cache</span> <span class="o">=</span> <span class="n">DistributedCache</span><span class="p">(</span><span class="s2">&quot;strong&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">cp_cache</span><span class="o">.</span><span class="n">write_data</span><span class="p">(</span><span class="s2">&quot;user:123&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">})</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Write successful&quot;</span><span class="p">)</span>
    <span class="n">cp_cache</span><span class="o">.</span><span class="n">simulate_partition</span><span class="p">(</span><span class="s2">&quot;node2&quot;</span><span class="p">)</span>
    <span class="n">cp_cache</span><span class="o">.</span><span class="n">simulate_partition</span><span class="p">(</span><span class="s2">&quot;node3&quot;</span><span class="p">)</span>
    <span class="n">cp_cache</span><span class="o">.</span><span class="n">write_data</span><span class="p">(</span><span class="s2">&quot;user:456&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Jane&quot;</span><span class="p">})</span>  <span class="c1"># This will fail</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CP Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== AP System (Eventual Consistency) ===&quot;</span><span class="p">)</span>
<span class="n">ap_cache</span> <span class="o">=</span> <span class="n">DistributedCache</span><span class="p">(</span><span class="s2">&quot;eventual&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">ap_cache</span><span class="o">.</span><span class="n">write_data</span><span class="p">(</span><span class="s2">&quot;user:123&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">})</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Write successful&quot;</span><span class="p">)</span>
    <span class="n">ap_cache</span><span class="o">.</span><span class="n">simulate_partition</span><span class="p">(</span><span class="s2">&quot;node2&quot;</span><span class="p">)</span>
    <span class="n">ap_cache</span><span class="o">.</span><span class="n">simulate_partition</span><span class="p">(</span><span class="s2">&quot;node3&quot;</span><span class="p">)</span>
    <span class="n">ap_cache</span><span class="o">.</span><span class="n">write_data</span><span class="p">(</span><span class="s2">&quot;user:456&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Jane&quot;</span><span class="p">})</span>  <span class="c1"># This will succeed</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Write successful even with partitions&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;AP Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h2 id="common-interview-questions">Common Interview Questions<a class="headerlink" href="#common-interview-questions" title="Permanent link">&para;</a></h2>
<p><strong>Q: What is the CAP Theorem and why is it important?</strong></p>
<p>The CAP Theorem states that in any distributed system, you can only guarantee two out of three properties: Consistency (all nodes see the same data), Availability (system remains operational), and Partition tolerance (system works despite network failures). It's important because it helps architects understand fundamental trade-offs in distributed systems and guides design decisions. Since network partitions are inevitable in distributed systems, you typically choose between consistency and availability during partition scenarios.</p>
<p><strong>Q: Can you give examples of CP and AP systems?</strong></p>
<p>CP systems include traditional relational databases like PostgreSQL with strong consistency settings, Apache HBase, and MongoDB with strong consistency. These prioritize data correctness over availability. AP systems include Amazon DynamoDB, Apache Cassandra, and many CDNs that prioritize staying available even if data might be temporarily inconsistent. Banking systems often choose CP (better to be unavailable than show wrong balances), while social media often chooses AP (better to show slightly stale content than be unavailable).</p>
<p><strong>Q: Why can't you have all three properties in a distributed system?</strong></p>
<p>During a network partition, you must choose: either maintain consistency by refusing requests when you can't verify all nodes have the same data (sacrificing availability), or continue serving requests knowing that nodes might have different data (sacrificing consistency). Partition tolerance is necessary in any truly distributed system because network failures are inevitable. The theorem doesn't say you can never have all three, but that you can't guarantee all three simultaneously during all failure scenarios.</p>
<p><strong>Q: How do modern systems handle CAP theorem limitations?</strong></p>
<p>Modern systems often use tunable consistency, allowing applications to choose consistency levels per operation. They employ techniques like eventual consistency with conflict resolution, multi-version concurrency control, and different consistency levels for different data types. Many systems are "basically available" during partitions but provide strong consistency when the network is healthy. The goal is to minimize the impact of CAP limitations through careful design rather than ignoring them.</p>
<h2 id="beyond-cap-modern-perspectives">Beyond CAP: Modern Perspectives<a class="headerlink" href="#beyond-cap-modern-perspectives" title="Permanent link">&para;</a></h2>
<h3 id="pacelc-theorem">PACELC Theorem<a class="headerlink" href="#pacelc-theorem" title="Permanent link">&para;</a></h3>
<p>The PACELC theorem extends CAP by addressing what happens when there are no partitions. It states that in the case of network partitioning (P), you have to choose between availability (A) and consistency (C), but else (E), even when the system is running normally without partitions, you have to choose between latency (L) and consistency (C).</p>
<p>This extension acknowledges that consistency vs. performance trade-offs exist even in non-partition scenarios, helping explain design decisions in systems that prioritize low latency over strong consistency.</p>
<h3 id="eventual-consistency-models">Eventual Consistency Models<a class="headerlink" href="#eventual-consistency-models" title="Permanent link">&para;</a></h3>
<p>Many modern systems implement sophisticated eventual consistency models that provide better guarantees than simple "eventual consistency." These include:</p>
<p><strong>Causal Consistency</strong>: Ensures that causally related operations are seen in the same order by all nodes, even if concurrent operations might be seen in different orders.</p>
<p><strong>Session Consistency</strong>: Guarantees that within a single user session, reads will see the effects of previous writes from that session.</p>
<p><strong>Monotonic Read Consistency</strong>: Ensures that if a user has seen a particular value, they will never see an older value in subsequent reads.</p>
<h2 id="best-practices-for-cap-aware-design">Best Practices for CAP-Aware Design<a class="headerlink" href="#best-practices-for-cap-aware-design" title="Permanent link">&para;</a></h2>
<h3 id="understand-your-requirements">Understand Your Requirements<a class="headerlink" href="#understand-your-requirements" title="Permanent link">&para;</a></h3>
<p>Before designing a distributed system, clearly understand your consistency and availability requirements. Not all data requires the same level of consistency - user preferences might tolerate eventual consistency while financial transactions require strong consistency.</p>
<h3 id="design-for-graceful-degradation">Design for Graceful Degradation<a class="headerlink" href="#design-for-graceful-degradation" title="Permanent link">&para;</a></h3>
<p>Build systems that can provide reduced functionality during partition scenarios rather than becoming completely unavailable. For example, a social media platform might allow posting and reading cached content during partitions while disabling features that require strong consistency.</p>
<h3 id="monitor-and-alert">Monitor and Alert<a class="headerlink" href="#monitor-and-alert" title="Permanent link">&para;</a></h3>
<p>Implement monitoring to detect partition scenarios and inconsistency issues. Alert operations teams when the system is operating in degraded consistency modes so they can take appropriate action.</p>
<h3 id="test-partition-scenarios">Test Partition Scenarios<a class="headerlink" href="#test-partition-scenarios" title="Permanent link">&para;</a></h3>
<p>Regularly test how your system behaves during network partitions using chaos engineering techniques. Simulate network failures and verify that your system handles them according to your CAP design decisions.</p>
<p>Understanding the CAP theorem is essential for anyone designing or working with distributed systems. It provides a framework for understanding why different systems make different design choices and helps guide architectural decisions based on your specific requirements for consistency, availability, and partition tolerance.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.sections", "navigation.tracking", "content.code.copy", "content.action.edit", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>