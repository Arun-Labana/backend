
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A 45-day learning plan covering essential backend concepts with beginner-friendly notes and Java examples.">
      
      
      
        <link rel="canonical" href="https://Arun-Labana.github.io/backend/22.%20Circuit%20Breaker%20Pattern/">
      
      
        <link rel="prev" href="../21.%20API%20Gateway/">
      
      
        <link rel="next" href="../23.%20Retry%20%26%20Backoff%20Strategies/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>22. Circuit Breaker Pattern - 45 Days Backend Concepts</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#circuit-breaker-pattern" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="45 Days Backend Concepts" class="md-header__button md-logo" aria-label="45 Days Backend Concepts" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            45 Days Backend Concepts
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              22. Circuit Breaker Pattern
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Arun-Labana/backend" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Arun-Labana/backend
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="45 Days Backend Concepts" class="md-nav__button md-logo" aria-label="45 Days Backend Concepts" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    45 Days Backend Concepts
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Arun-Labana/backend" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Arun-Labana/backend
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Days
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Days
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01.%20Connection%20Pooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    01. Connection Pooling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02.%20Idempotency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    02. Idempotency
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03.%20Caching%20%28In-Memory%20vs%20Distributed%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    03. Caching (In-Memory vs Distributed)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04.%20Load%20Balancing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    04. Load Balancing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05.%20Rate%20Limiting%20%26%20Throttling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    05. Rate Limiting & Throttling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06.%20Horizontal%20vs%20Vertical%20Scaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    06. Horizontal vs Vertical Scaling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07.%20Stateless%20vs%20Stateful%20Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    07. Stateless vs Stateful Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08.%20Transactions%20%28ACID%20properties%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    08. Transactions (ACID properties)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09.%20Indexes%20%28B-Tree%2C%20Hash%2C%20etc.%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    09. Indexes (B-Tree, Hash, etc.)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10.%20Joins%20%26%20Query%20Optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10. Joins & Query Optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11.%20Normalization%20vs%20Denormalization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11. Normalization vs Denormalization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12.%20Sharding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12. Sharding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13.%20Replication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13. Replication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14.%20CAP%20Theorem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14. CAP Theorem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../15.%20REST%20APIs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15. REST APIs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../16.%20GraphQL%20Basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    16. GraphQL Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../17.%20gRPC%20%26%20Protocol%20Buffers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    17. gRPC & Protocol Buffers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../18.%20WebSockets%20%28Realtime%20communication%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    18. WebSockets (Realtime communication)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../19.%20Message%20Queues%20%28RabbitMQ%2C%20Kafka%2C%20SQS%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    19. Message Queues (RabbitMQ, Kafka, SQS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../20.%20Event-driven%20Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    20. Event-driven Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../21.%20API%20Gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    21. API Gateway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    22. Circuit Breaker Pattern
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    22. Circuit Breaker Pattern
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-the-circuit-breaker-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      What is the Circuit Breaker Pattern?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-circuit-breakers-work" class="md-nav__link">
    <span class="md-ellipsis">
      How Circuit Breakers Work
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How Circuit Breakers Work">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-three-states" class="md-nav__link">
    <span class="md-ellipsis">
      The Three States
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-detection-and-thresholds" class="md-nav__link">
    <span class="md-ellipsis">
      Failure Detection and Thresholds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fallback-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      Fallback Mechanisms
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-circuit-breakers-are-essential" class="md-nav__link">
    <span class="md-ellipsis">
      Why Circuit Breakers are Essential
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Why Circuit Breakers are Essential">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preventing-cascading-failures" class="md-nav__link">
    <span class="md-ellipsis">
      Preventing Cascading Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-protection" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Protection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improved-system-resilience" class="md-nav__link">
    <span class="md-ellipsis">
      Improved System Resilience
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#faster-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Faster Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Real-World Applications
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real-World Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#e-commerce-platform" class="md-nav__link">
    <span class="md-ellipsis">
      E-commerce Platform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#financial-trading-system" class="md-nav__link">
    <span class="md-ellipsis">
      Financial Trading System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#social-media-platform" class="md-nav__link">
    <span class="md-ellipsis">
      Social Media Platform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microservices-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Microservices Architecture
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-circuit-breaker-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Circuit Breaker Implementation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-interview-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Common Interview Questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#circuit-breaker-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Circuit Breaker Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Circuit Breaker Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-appropriate-thresholds" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Appropriate Thresholds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implement-meaningful-fallbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Implement Meaningful Fallbacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor-circuit-breaker-states" class="md-nav__link">
    <span class="md-ellipsis">
      Monitor Circuit Breaker States
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-failure-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      Test Failure Scenarios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-for-graceful-degradation" class="md-nav__link">
    <span class="md-ellipsis">
      Design for Graceful Degradation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../23.%20Retry%20%26%20Backoff%20Strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    23. Retry & Backoff Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../24.%20Dead%20Letter%20Queues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    24. Dead Letter Queues
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../25.%20Distributed%20Locks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    25. Distributed Locks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../26.%20Leader%20Election/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    26. Leader Election
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../27.%20Consensus%20Algorithms%20%28Raft%2C%20Paxos%20basics%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    27. Consensus Algorithms (Raft, Paxos basics)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../28.%20Quorum%20in%20Databases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    28. Quorum in Databases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../29.%20Authentication%20vs%20Authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    29. Authentication vs Authorization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../30.%20JWT%20%26%20OAuth2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    30. JWT & OAuth2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../31.%20CSRF%20%26%20XSS%20Protection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    31. CSRF & XSS Protection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../32.%20SQL%20Injection%20%26%20Prevention/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    32. SQL Injection & Prevention
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../33.%20HTTPS%20%26%20TLS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    33. HTTPS & TLS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../34.%20CORS%20%28Cross-Origin%20Resource%20Sharing%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    34. CORS (Cross-Origin Resource Sharing)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../35.%20Hashing%20%26%20Password%20Storage%20%28bcrypt%2C%20Argon2%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    35. Hashing & Password Storage (bcrypt, Argon2)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../36.%20Logging%20Strategies%20%28Structured%20Logging%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    36. Logging Strategies (Structured Logging)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../37.%20Metrics%20%26%20Monitoring%20%28Prometheus%2C%20Grafana%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    37. Metrics & Monitoring (Prometheus, Grafana)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../38.%20Tracing%20%28Distributed%20Tracing%2C%20OpenTelemetry%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    38. Tracing (Distributed Tracing, OpenTelemetry)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../39.%20Health%20Checks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    39. Health Checks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../40.%20Profiling%20%26%20Benchmarking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    40. Profiling & Benchmarking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../41.%20Error%20Handling%20Patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    41. Error Handling Patterns
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../42.%20Blue-Green%20%26%20Canary%20Deployments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    42. Blue-Green & Canary Deployments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../43.%20CQRS%20%28Command%20Query%20Responsibility%20Segregation%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    43. CQRS (Command Query Responsibility Segregation)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../44.%20Event%20Sourcing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    44. Event Sourcing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../45.%20Microservices%20vs%20Monoliths%20vs%20Serverless/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    45. Microservices vs Monoliths vs Serverless
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-the-circuit-breaker-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      What is the Circuit Breaker Pattern?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-circuit-breakers-work" class="md-nav__link">
    <span class="md-ellipsis">
      How Circuit Breakers Work
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How Circuit Breakers Work">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-three-states" class="md-nav__link">
    <span class="md-ellipsis">
      The Three States
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-detection-and-thresholds" class="md-nav__link">
    <span class="md-ellipsis">
      Failure Detection and Thresholds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fallback-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      Fallback Mechanisms
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-circuit-breakers-are-essential" class="md-nav__link">
    <span class="md-ellipsis">
      Why Circuit Breakers are Essential
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Why Circuit Breakers are Essential">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preventing-cascading-failures" class="md-nav__link">
    <span class="md-ellipsis">
      Preventing Cascading Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-protection" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Protection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improved-system-resilience" class="md-nav__link">
    <span class="md-ellipsis">
      Improved System Resilience
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#faster-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Faster Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Real-World Applications
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real-World Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#e-commerce-platform" class="md-nav__link">
    <span class="md-ellipsis">
      E-commerce Platform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#financial-trading-system" class="md-nav__link">
    <span class="md-ellipsis">
      Financial Trading System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#social-media-platform" class="md-nav__link">
    <span class="md-ellipsis">
      Social Media Platform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microservices-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Microservices Architecture
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-circuit-breaker-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Circuit Breaker Implementation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-interview-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Common Interview Questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#circuit-breaker-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Circuit Breaker Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Circuit Breaker Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-appropriate-thresholds" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Appropriate Thresholds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implement-meaningful-fallbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Implement Meaningful Fallbacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor-circuit-breaker-states" class="md-nav__link">
    <span class="md-ellipsis">
      Monitor Circuit Breaker States
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-failure-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      Test Failure Scenarios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-for-graceful-degradation" class="md-nav__link">
    <span class="md-ellipsis">
      Design for Graceful Degradation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/Arun-Labana/backend/edit/master/docs/22. Circuit Breaker Pattern/README.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="circuit-breaker-pattern">Circuit Breaker Pattern<a class="headerlink" href="#circuit-breaker-pattern" title="Permanent link">&para;</a></h1>
<h2 id="what-is-the-circuit-breaker-pattern">What is the Circuit Breaker Pattern?<a class="headerlink" href="#what-is-the-circuit-breaker-pattern" title="Permanent link">&para;</a></h2>
<p>The Circuit Breaker pattern is a design pattern used to detect failures and prevent cascading system failures by temporarily stopping calls to a failing service. Think of it like the electrical circuit breaker in your home - when an electrical fault occurs that could damage your appliances or cause a fire, the circuit breaker immediately cuts the power to protect the entire electrical system. Similarly, when a software service starts failing, a circuit breaker stops sending requests to that service to prevent the failure from spreading throughout your distributed system.</p>
<p>In distributed systems, services often depend on other services, creating chains of dependencies. When one service in the chain fails, it can cause a cascading failure that brings down the entire system. The circuit breaker pattern acts as a protective mechanism that monitors service calls and "trips" (opens) when failures exceed a threshold, preventing further damage and giving the failing service time to recover.</p>
<h2 id="how-circuit-breakers-work">How Circuit Breakers Work<a class="headerlink" href="#how-circuit-breakers-work" title="Permanent link">&para;</a></h2>
<h3 id="the-three-states">The Three States<a class="headerlink" href="#the-three-states" title="Permanent link">&para;</a></h3>
<p>A circuit breaker operates in three distinct states, each serving a specific purpose in the failure detection and recovery process.</p>
<p><strong>Closed State</strong> represents normal operation where all requests are allowed to pass through to the target service. The circuit breaker monitors the success and failure rates of these requests, keeping track of recent results to determine if the service is healthy. In this state, the system operates normally with full functionality, but the circuit breaker is continuously watching for signs of trouble.</p>
<p><strong>Open State</strong> occurs when the failure rate exceeds the configured threshold. In this state, the circuit breaker immediately rejects all requests without attempting to call the failing service, returning a predefined error response or fallback result. This prevents the system from wasting resources on calls that are likely to fail and protects the failing service from additional load that might prevent its recovery.</p>
<p><strong>Half-Open State</strong> is a trial period that begins after a specified timeout when the circuit breaker is in the open state. During this phase, the circuit breaker allows a limited number of test requests to pass through to check if the service has recovered. If these test requests succeed, the circuit breaker transitions back to the closed state. If they fail, it returns to the open state for another timeout period.</p>
<h3 id="failure-detection-and-thresholds">Failure Detection and Thresholds<a class="headerlink" href="#failure-detection-and-thresholds" title="Permanent link">&para;</a></h3>
<p>Circuit breakers use various metrics to detect failures and decide when to trip. Common failure indicators include response timeouts, HTTP error status codes (5xx), connection failures, and application-specific exceptions. The breaker typically maintains a sliding window of recent requests to calculate failure rates rather than looking at absolute numbers of failures.</p>
<p>Threshold configuration is crucial for effective circuit breaker operation. Setting thresholds too low can cause unnecessary tripping during minor issues, while setting them too high might allow cascading failures to occur. Most implementations allow configuration of failure percentage thresholds (e.g., trip when 50% of requests fail), minimum request volumes (e.g., only consider failure rates after at least 10 requests), and timeout periods for state transitions.</p>
<h3 id="fallback-mechanisms">Fallback Mechanisms<a class="headerlink" href="#fallback-mechanisms" title="Permanent link">&para;</a></h3>
<p>When a circuit breaker is open and rejecting requests, it should provide meaningful fallback responses rather than simply returning errors. Fallback strategies might include returning cached data, default values, simplified responses, or gracefully degraded functionality. The goal is to maintain system functionality, even if at a reduced level, rather than complete service failure.</p>
<h2 id="why-circuit-breakers-are-essential">Why Circuit Breakers are Essential<a class="headerlink" href="#why-circuit-breakers-are-essential" title="Permanent link">&para;</a></h2>
<h3 id="preventing-cascading-failures">Preventing Cascading Failures<a class="headerlink" href="#preventing-cascading-failures" title="Permanent link">&para;</a></h3>
<p>In distributed systems, one slow or failing service can trigger a cascade of failures throughout the system. When Service A calls Service B, and Service B is slow to respond, Service A's threads or connection pools can become exhausted waiting for responses. This resource exhaustion can cause Service A to become unresponsive, which then affects any services that depend on Service A.</p>
<p>Circuit breakers prevent this cascade by quickly failing fast when a service is having problems, freeing up resources that would otherwise be tied up in failed requests. This allows the rest of the system to continue operating normally while the problematic service recovers.</p>
<h3 id="resource-protection">Resource Protection<a class="headerlink" href="#resource-protection" title="Permanent link">&para;</a></h3>
<p>Failed service calls consume valuable system resources including threads, memory, network connections, and database connections. When a service is down, continuing to send requests wastes these resources and can lead to resource exhaustion in the calling service. Circuit breakers protect these resources by stopping calls to failed services immediately.</p>
<p>This resource protection is particularly important in high-traffic systems where resource exhaustion can quickly spread from one component to many, creating system-wide outages that are difficult to recover from.</p>
<h3 id="improved-system-resilience">Improved System Resilience<a class="headerlink" href="#improved-system-resilience" title="Permanent link">&para;</a></h3>
<p>Circuit breakers improve overall system resilience by isolating failures and providing controlled degradation. Instead of complete system failure, circuit breakers enable systems to continue operating with reduced functionality, providing better user experience during outages and maintaining critical business operations.</p>
<h3 id="faster-recovery">Faster Recovery<a class="headerlink" href="#faster-recovery" title="Permanent link">&para;</a></h3>
<p>By stopping traffic to failing services, circuit breakers give those services an opportunity to recover without being overwhelmed by incoming requests. This can significantly reduce recovery time, as the failing service doesn't need to handle the additional load while trying to resolve its issues.</p>
<h2 id="real-world-applications">Real-World Applications<a class="headerlink" href="#real-world-applications" title="Permanent link">&para;</a></h2>
<h3 id="e-commerce-platform">E-commerce Platform<a class="headerlink" href="#e-commerce-platform" title="Permanent link">&para;</a></h3>
<p>Consider an e-commerce platform where the main application depends on several microservices: user service, product catalog, inventory service, payment service, and recommendation engine. During Black Friday traffic, the recommendation engine becomes overloaded and starts responding slowly, causing timeouts.</p>
<p>Without circuit breakers, the main application would continue trying to fetch recommendations, tying up threads and potentially making the entire site unresponsive. With circuit breakers, after detecting failures in the recommendation service, the breaker opens and the main application serves product pages without recommendations, maintaining core functionality while the recommendation service recovers.</p>
<h3 id="financial-trading-system">Financial Trading System<a class="headerlink" href="#financial-trading-system" title="Permanent link">&para;</a></h3>
<p>In high-frequency trading systems, market data services provide real-time price feeds that trading algorithms depend on. If a market data service becomes unavailable or slow, trading algorithms need to make decisions quickly without waiting for timeouts.</p>
<p>Circuit breakers allow trading systems to quickly detect market data service failures and switch to alternative data sources or cached data, ensuring that trading decisions can continue to be made even when some data sources are unavailable. This prevents missed trading opportunities and maintains system responsiveness during critical market events.</p>
<h3 id="social-media-platform">Social Media Platform<a class="headerlink" href="#social-media-platform" title="Permanent link">&para;</a></h3>
<p>Social media platforms often integrate with external services for features like link previews, location services, or content analysis. When these external services experience issues, they shouldn't impact the core social media functionality.</p>
<p>Circuit breakers protect against slow or failing external services by quickly detecting problems and serving fallback responses. For example, if a link preview service is down, the circuit breaker can serve posts without previews rather than making users wait for timeouts or causing the entire feed to become unresponsive.</p>
<h3 id="microservices-architecture">Microservices Architecture<a class="headerlink" href="#microservices-architecture" title="Permanent link">&para;</a></h3>
<p>In a complex microservices environment, services have intricate dependency graphs where Service A depends on Services B and C, which in turn depend on Services D, E, and F. When Service E fails, it can potentially impact multiple services up the dependency chain.</p>
<p>Circuit breakers at each service boundary prevent failures from propagating upward through the dependency graph. When Service E fails, the circuit breaker protecting calls to Service E opens, allowing Service C to provide degraded functionality instead of becoming completely unavailable, which protects Services A and B from being affected by Service E's problems.</p>
<h2 id="simple-circuit-breaker-implementation">Simple Circuit Breaker Implementation<a class="headerlink" href="#simple-circuit-breaker-implementation" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CircuitState</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">CLOSED</span> <span class="o">=</span> <span class="s2">&quot;closed&quot;</span>
    <span class="n">OPEN</span> <span class="o">=</span> <span class="s2">&quot;open&quot;</span> 
    <span class="n">HALF_OPEN</span> <span class="o">=</span> <span class="s2">&quot;half_open&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CircuitBreakerError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when circuit breaker is open&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CircuitBreaker</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                 <span class="n">failure_threshold</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
                 <span class="n">failure_timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span>
                 <span class="n">expected_exception</span><span class="p">:</span> <span class="nb">type</span> <span class="o">=</span> <span class="ne">Exception</span><span class="p">,</span>
                 <span class="n">fallback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="c1"># Configuration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failure_threshold</span> <span class="o">=</span> <span class="n">failure_threshold</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failure_timeout</span> <span class="o">=</span> <span class="n">failure_timeout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expected_exception</span> <span class="o">=</span> <span class="n">expected_exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fallback_function</span> <span class="o">=</span> <span class="n">fallback_function</span>

        <span class="c1"># State tracking</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failure_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_failure_time</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">CircuitState</span><span class="o">.</span><span class="n">CLOSED</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute function with circuit breaker protection&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">CircuitState</span><span class="o">.</span><span class="n">OPEN</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_should_attempt_reset</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">CircuitState</span><span class="o">.</span><span class="n">HALF_OPEN</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Circuit breaker moving to HALF_OPEN state&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_open_circuit</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">CircuitState</span><span class="o">.</span><span class="n">HALF_OPEN</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_half_open_call</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_closed_call</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_should_attempt_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if enough time has passed to attempt reset&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_failure_time</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_failure_time</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">failure_timeout</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_handle_open_circuit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle requests when circuit is open&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fallback_function</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Circuit breaker OPEN - executing fallback&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fallback_function</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Circuit breaker OPEN - failing fast&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CircuitBreakerError</span><span class="p">(</span><span class="s2">&quot;Circuit breaker is OPEN&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_handle_half_open_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle requests when circuit is half-open&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Circuit breaker HALF_OPEN - testing service&quot;</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_record_success</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="bp">self</span><span class="o">.</span><span class="n">expected_exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_record_failure</span><span class="p">()</span>
            <span class="k">raise</span> <span class="n">e</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_handle_closed_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle requests when circuit is closed&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_record_success</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="bp">self</span><span class="o">.</span><span class="n">expected_exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_record_failure</span><span class="p">()</span>
            <span class="k">raise</span> <span class="n">e</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_record_success</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Record successful request&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failure_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">CircuitState</span><span class="o">.</span><span class="n">HALF_OPEN</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">CircuitState</span><span class="o">.</span><span class="n">CLOSED</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Circuit breaker moving to CLOSED state - service recovered&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_record_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Record failed request&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failure_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_failure_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">failure_count</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">failure_threshold</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">CircuitState</span><span class="o">.</span><span class="n">OPEN</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Circuit breaker TRIPPED - moving to OPEN state after </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">failure_count</span><span class="si">}</span><span class="s2"> failures&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CircuitState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get current circuit breaker state&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>

<span class="c1"># Example usage with a simulated service</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ExternalService</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failure_mode</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">make_api_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Simulate an external API call&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API call #</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">call_count</span><span class="si">}</span><span class="s2"> with data: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">failure_mode</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Service unavailable (call #</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">call_count</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Success response for: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">enable_failure_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Simulate service going down&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failure_mode</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Service entering failure mode&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">disable_failure_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Simulate service recovery&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failure_mode</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Service recovered&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">fallback_response</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fallback function when service is unavailable&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;Fallback response - service temporarily unavailable&quot;</span>

<span class="c1"># Demo circuit breaker behavior</span>
<span class="k">def</span><span class="w"> </span><span class="nf">demo_circuit_breaker</span><span class="p">():</span>
    <span class="n">service</span> <span class="o">=</span> <span class="n">ExternalService</span><span class="p">()</span>
    <span class="n">circuit_breaker</span> <span class="o">=</span> <span class="n">CircuitBreaker</span><span class="p">(</span>
        <span class="n">failure_threshold</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">failure_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">fallback_function</span><span class="o">=</span><span class="n">fallback_response</span>
    <span class="p">)</span>

    <span class="c1"># Normal operation</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Normal Operation ===&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">circuit_breaker</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">service</span><span class="o">.</span><span class="n">make_api_call</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;request_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Result: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Service fails</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Service Failure ===&quot;</span><span class="p">)</span>
    <span class="n">service</span><span class="o">.</span><span class="n">enable_failure_mode</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">circuit_breaker</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">service</span><span class="o">.</span><span class="n">make_api_call</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;failing_request_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Result: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Circuit state: </span><span class="si">{</span><span class="n">circuit_breaker</span><span class="o">.</span><span class="n">get_state</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Wait for timeout and recovery</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Waiting for Recovery ===&quot;</span><span class="p">)</span>
    <span class="n">service</span><span class="o">.</span><span class="n">disable_failure_mode</span><span class="p">()</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># Wait longer than failure_timeout</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">circuit_breaker</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">service</span><span class="o">.</span><span class="n">make_api_call</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;recovery_request_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Result: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Circuit state: </span><span class="si">{</span><span class="n">circuit_breaker</span><span class="o">.</span><span class="n">get_state</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">demo_circuit_breaker</span><span class="p">()</span>
</code></pre></div>

<h2 id="common-interview-questions">Common Interview Questions<a class="headerlink" href="#common-interview-questions" title="Permanent link">&para;</a></h2>
<p><strong>Q: What is the Circuit Breaker pattern and why is it important?</strong></p>
<p>The Circuit Breaker pattern is a fault tolerance mechanism that monitors service calls and prevents cascading failures by temporarily stopping requests to failing services. It's important because it protects system resources, prevents cascading failures, enables faster recovery, and provides graceful degradation during outages. Like an electrical circuit breaker, it detects failures and "trips" to protect the overall system. It operates in three states: closed (normal operation), open (blocking calls to failed service), and half-open (testing if service has recovered).</p>
<p><strong>Q: How does a circuit breaker decide when to trip and when to reset?</strong></p>
<p>Circuit breakers trip based on configurable thresholds such as failure percentage (e.g., 50% of requests failing), minimum request volume (e.g., at least 10 requests), and time windows (e.g., within last 60 seconds). They reset after a timeout period when transitioning to half-open state, where test requests determine if the service has recovered. Successful test requests close the circuit, while failures return it to open state. The key is balancing sensitivity (detecting real problems quickly) with stability (avoiding false positives from temporary glitches).</p>
<p><strong>Q: What's the difference between circuit breaker, timeout, and retry patterns?</strong></p>
<p>These patterns address different aspects of fault tolerance: Timeouts prevent hanging indefinitely on slow services but don't prevent repeated attempts to failing services. Retries attempt failed operations multiple times but can worsen problems by increasing load on failing services. Circuit breakers monitor failure patterns and prevent calls to persistently failing services, providing faster failure detection and system protection. They're often used together: timeouts detect slow services, retries handle transient failures, and circuit breakers protect against persistent failures.</p>
<p><strong>Q: How do you implement fallback strategies with circuit breakers?</strong></p>
<p>Fallback strategies provide alternative responses when circuit breakers are open: return cached data (serve stale but valid information), provide default values (empty lists, default configurations), offer degraded functionality (simplified features), return static responses (maintenance messages), or redirect to alternative services. The key is designing meaningful fallbacks that maintain user experience. For example, an e-commerce site might show products without recommendations rather than failing completely, or a social media feed might load cached content when real-time updates aren't available.</p>
<h2 id="circuit-breaker-best-practices">Circuit Breaker Best Practices<a class="headerlink" href="#circuit-breaker-best-practices" title="Permanent link">&para;</a></h2>
<h3 id="configure-appropriate-thresholds">Configure Appropriate Thresholds<a class="headerlink" href="#configure-appropriate-thresholds" title="Permanent link">&para;</a></h3>
<p>Set failure thresholds based on your specific service characteristics and business requirements. Consider factors like normal failure rates, acceptable downtime, and service criticality. Monitor your services to understand normal failure patterns and set thresholds that detect real problems without triggering on normal variations.</p>
<h3 id="implement-meaningful-fallbacks">Implement Meaningful Fallbacks<a class="headerlink" href="#implement-meaningful-fallbacks" title="Permanent link">&para;</a></h3>
<p>Design fallback responses that provide value to users rather than generic error messages. Consider what constitutes acceptable degraded functionality for each service and implement fallbacks that maintain core user experience. Cache frequently accessed data to serve during outages, and provide clear communication about what functionality is temporarily unavailable.</p>
<h3 id="monitor-circuit-breaker-states">Monitor Circuit Breaker States<a class="headerlink" href="#monitor-circuit-breaker-states" title="Permanent link">&para;</a></h3>
<p>Implement comprehensive monitoring and alerting for circuit breaker state changes. Track metrics like trip frequency, open duration, and fallback usage to understand system health and identify recurring problems. Use this data to tune thresholds and improve service reliability.</p>
<h3 id="test-failure-scenarios">Test Failure Scenarios<a class="headerlink" href="#test-failure-scenarios" title="Permanent link">&para;</a></h3>
<p>Regularly test circuit breaker behavior through chaos engineering and failure injection. Verify that circuit breakers trip appropriately, fallbacks work as expected, and services recover correctly. Test different failure modes including slow responses, intermittent failures, and complete service outages.</p>
<h3 id="design-for-graceful-degradation">Design for Graceful Degradation<a class="headerlink" href="#design-for-graceful-degradation" title="Permanent link">&para;</a></h3>
<p>Build systems that can operate with reduced functionality rather than complete failure. Identify critical vs. non-critical features and ensure that circuit breakers protect non-critical services from impacting critical functionality. Consider the user impact of different service failures and prioritize accordingly.</p>
<p>The Circuit Breaker pattern is an essential tool for building resilient distributed systems. When implemented correctly, it provides automatic fault detection, system protection, and graceful degradation that significantly improves overall system reliability and user experience during service disruptions.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.sections", "navigation.tracking", "content.code.copy", "content.action.edit", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>